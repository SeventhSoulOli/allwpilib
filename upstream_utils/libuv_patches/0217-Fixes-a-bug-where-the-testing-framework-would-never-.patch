From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Jonathan Leitschuh <jlleitschuh@wpi.edu>
Date: Tue, 29 Jul 2014 15:25:31 -0400
Subject: [PATCH 0217/6262] Fixes a bug where the testing framework would never
 set the implementation for the libraries.

Change-Id: I8f745ebd870c8dacf28b0459e3d5128195fcbb87
---
 .../edu/wpi/first/wpilibj/test/AbstractComsSetup.java  | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/wpilibj/wpilibJavaIntegrationTests/src/main/java/edu/wpi/first/wpilibj/test/AbstractComsSetup.java b/wpilibj/wpilibJavaIntegrationTests/src/main/java/edu/wpi/first/wpilibj/test/AbstractComsSetup.java
index 964ae82919eb6d57d1f79ee3e7667a9f54ec24fb..c569a2c713cb8cc80641075a20996b85a95e4346 100644
--- a/wpilibj/wpilibJavaIntegrationTests/src/main/java/edu/wpi/first/wpilibj/test/AbstractComsSetup.java
+++ b/wpilibj/wpilibJavaIntegrationTests/src/main/java/edu/wpi/first/wpilibj/test/AbstractComsSetup.java
@@ -16,8 +16,12 @@ import org.junit.runner.Description;
 import org.junit.runners.model.MultipleFailureException;
 
 import edu.wpi.first.wpilibj.DriverStation;
+import edu.wpi.first.wpilibj.HLUsageReporting;
+import edu.wpi.first.wpilibj.RobotState;
 import edu.wpi.first.wpilibj.Timer;
 import edu.wpi.first.wpilibj.communication.FRCNetworkCommunicationsLibrary;
+import edu.wpi.first.wpilibj.internal.HardwareHLUsageReporting;
+import edu.wpi.first.wpilibj.internal.HardwareTimer;
 import edu.wpi.first.wpilibj.livewindow.LiveWindow;
 
 /**
@@ -42,6 +46,12 @@ public abstract class AbstractComsSetup {
 	 */
 	static{
 		if (!initialized) {
+			// Set some implementations so that the static methods work properly
+			Timer.SetImplementation(new HardwareTimer());
+			HLUsageReporting.SetImplementation(new HardwareHLUsageReporting());
+			RobotState.SetImplementation(DriverStation.getInstance());
+
+			
 			// Start up the network communications
 			FRCNetworkCommunicationsLibrary.FRCNetworkCommunicationReserve();
 			FRCNetworkCommunicationsLibrary
