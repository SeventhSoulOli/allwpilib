From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Joe Ross <joe@rossesmail.com>
Date: Thu, 27 Nov 2014 11:31:00 -0800
Subject: [PATCH 0512/6262] Feed motor safety when StopMotor is called. Fixes
 artf1687 on FirstForge.

Change-Id: I75c1b30c28193c1e5ed5f6fad502ab88ebc345fa
---
 wpilibc/wpilibC++Devices/src/RobotDrive.cpp                      | 1 +
 .../src/main/java/edu/wpi/first/wpilibj/RobotDrive.java          | 1 +
 2 files changed, 2 insertions(+)

diff --git a/wpilibc/wpilibC++Devices/src/RobotDrive.cpp b/wpilibc/wpilibC++Devices/src/RobotDrive.cpp
index ab6ccddb49e30e61083906fe201b30b1fe2c9af6..ffa8b31cb7dc3947097de4283b0367b7953e55e1 100644
--- a/wpilibc/wpilibC++Devices/src/RobotDrive.cpp
+++ b/wpilibc/wpilibC++Devices/src/RobotDrive.cpp
@@ -735,4 +735,5 @@ void RobotDrive::StopMotor()
 	if (m_frontRightMotor != NULL) m_frontRightMotor->Disable();
 	if (m_rearLeftMotor != NULL) m_rearLeftMotor->Disable();
 	if (m_rearRightMotor != NULL) m_rearRightMotor->Disable();
+	m_safetyHelper->Feed();
 }
diff --git a/wpilibj/wpilibJavaDevices/src/main/java/edu/wpi/first/wpilibj/RobotDrive.java b/wpilibj/wpilibJavaDevices/src/main/java/edu/wpi/first/wpilibj/RobotDrive.java
index 1cefc9b79b0298e9717407d5a9a2d6932f6faae9..aefdd272d017cfa859fdfda21138e60c17f8545c 100644
--- a/wpilibj/wpilibJavaDevices/src/main/java/edu/wpi/first/wpilibj/RobotDrive.java
+++ b/wpilibj/wpilibJavaDevices/src/main/java/edu/wpi/first/wpilibj/RobotDrive.java
@@ -739,6 +739,7 @@ public class RobotDrive implements MotorSafety {
         if (m_rearRightMotor != null) {
             m_rearRightMotor.set(0.0);
         }
+        if (m_safetyHelper != null) m_safetyHelper.feed();
     }
 
     private void setupMotorSafety() {
