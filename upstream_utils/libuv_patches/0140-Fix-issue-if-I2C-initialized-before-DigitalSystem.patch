From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Kevin O'Connor <koconnor@usfirst.org>
Date: Fri, 27 Jun 2014 10:33:40 -0400
Subject: [PATCH 0140/6262] * Fix issue if I2C initialized before
 DigitalSystem.

Change-Id: I97bbbebb60730ddaad337a4a5dd73c9f40556a86
---
 hal/lib/Athena/Digital.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/hal/lib/Athena/Digital.cpp b/hal/lib/Athena/Digital.cpp
index 7bd533aa59260b4e7cc0a7cfd779b995eb1c6ce9..60125ac96dcc55220ddd4ebd96318ad6e8070dcd 100644
--- a/hal/lib/Athena/Digital.cpp
+++ b/hal/lib/Athena/Digital.cpp
@@ -1554,6 +1554,8 @@ void clearSPIReceivedData(void* spi_pointer, int32_t *status) {}
  * @param port The port to open, 0 for the on-board, 1 for the MXP.
  */
 void i2CInitialize(uint8_t port, int32_t *status) {
+	initializeDigital(status);
+
 	if(port > 1)
 	{
 		//Set port out of range error here
@@ -1570,7 +1572,6 @@ void i2CInitialize(uint8_t port, int32_t *status) {
 		} else if(port == 1) {
 			i2CMXPObjCount++;
 			if (i2CMXPHandle > 0) return;
-			initializeDigital(status);
 			digitalSystem->writeEnableMXPSpecialFunction(digitalSystem->readEnableMXPSpecialFunction(status)|0xC000, status);
 			i2CMXPHandle = i2clib_open("/dev/i2c-1");
 		}
