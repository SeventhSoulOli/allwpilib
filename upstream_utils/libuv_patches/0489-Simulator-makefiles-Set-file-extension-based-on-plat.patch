From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Dustin Spicuzza <dustin@virtualroadside.com>
Date: Sat, 15 Nov 2014 20:21:23 -0500
Subject: [PATCH 0489/6262] Simulator makefiles: Set file extension based on
 platform

---
 simulation/frc_gazebo_plugins/Makefile        | 23 +++++++++++--------
 simulation/frc_gazebo_plugins/clock/Makefile  |  7 +++++-
 .../frc_gazebo_plugins/dc_motor/Makefile      |  7 +++++-
 .../frc_gazebo_plugins/encoder/Makefile       |  7 +++++-
 simulation/frc_gazebo_plugins/gyro/Makefile   |  7 +++++-
 .../frc_gazebo_plugins/limit_switch/Makefile  |  7 +++++-
 simulation/frc_gazebo_plugins/msgs/Makefile   |  7 +++++-
 .../pneumatic_piston/Makefile                 |  7 +++++-
 .../frc_gazebo_plugins/potentiometer/Makefile |  7 +++++-
 .../frc_gazebo_plugins/rangefinder/Makefile   |  7 +++++-
 10 files changed, 68 insertions(+), 18 deletions(-)

diff --git a/simulation/frc_gazebo_plugins/Makefile b/simulation/frc_gazebo_plugins/Makefile
index cd8fcda2d3681a87e8327c9412f39adca2ce5ed3..005a77c30ed106216a264774d4415d96d6f93acf 100644
--- a/simulation/frc_gazebo_plugins/Makefile
+++ b/simulation/frc_gazebo_plugins/Makefile
@@ -3,6 +3,11 @@ lib.dir = $(prefix)/lib
 plugin.dir = $(lib.dir)/frcsim/plugins
 build.dir = build
 
+ext = .so
+ifeq ($(shell uname), Darwin)
+	ext = .dylib
+endif
+
 .PHONY : all build copy-plugins clean docs clean-docs
 
 all: build copy-plugins
@@ -20,15 +25,15 @@ build:
 
 copy-plugins:
 	mkdir -p plugins
-	cp msgs/build/libgz_msgs.so plugins
-	cp dc_motor/build/libgz_dc_motor.so plugins
-	cp pneumatic_piston/build/libgz_pneumatic_piston.so plugins
-	cp potentiometer/build/libgz_potentiometer.so plugins
-	cp rangefinder/build/libgz_rangefinder.so plugins
-	cp encoder/build/libgz_encoder.so plugins
-	cp gyro/build/libgz_gyro.so plugins
-	cp limit_switch/build/libgz_limit_switch.so plugins
-	cp clock/build/libgz_clock.so plugins
+	cp msgs/build/libgz_msgs$(ext) plugins
+	cp dc_motor/build/libgz_dc_motor$(ext) plugins
+	cp pneumatic_piston/build/libgz_pneumatic_piston$(ext) plugins
+	cp potentiometer/build/libgz_potentiometer$(ext) plugins
+	cp rangefinder/build/libgz_rangefinder$(ext) plugins
+	cp encoder/build/libgz_encoder$(ext) plugins
+	cp gyro/build/libgz_gyro$(ext) plugins
+	cp limit_switch/build/libgz_limit_switch$(ext) plugins
+	cp clock/build/libgz_clock$(ext) plugins
 
 clean: clean-docs
 	cd msgs && make clean
diff --git a/simulation/frc_gazebo_plugins/clock/Makefile b/simulation/frc_gazebo_plugins/clock/Makefile
index 22f17de166d89ea5a5804f6867ece396d7a1d35e..b8f6f9bb4c871f1975ebc25fb5d6d23d0ec436d6 100644
--- a/simulation/frc_gazebo_plugins/clock/Makefile
+++ b/simulation/frc_gazebo_plugins/clock/Makefile
@@ -3,6 +3,11 @@ lib.dir = $(prefix)/lib
 plugin.dir = $(lib.dir)/frcsim/plugins
 build.dir = build
 
+ext = .so
+ifeq ($(shell uname), Darwin)
+	ext = .dylib
+endif
+
 all:
 	mkdir -p $(build.dir)
 	cd ${build.dir} && cmake .. && make
@@ -12,4 +17,4 @@ clean:
 
 install: all
 	mkdir -p $(DESTDIR)$(plugin.dir)
-	install $(build.dir)/libgz_clock.so $(DESTDIR)$(plugin.dir)
+	install $(build.dir)/libgz_clock$(ext) $(DESTDIR)$(plugin.dir)
diff --git a/simulation/frc_gazebo_plugins/dc_motor/Makefile b/simulation/frc_gazebo_plugins/dc_motor/Makefile
index 6105c1ae069e93f91aac36e57b40c718ce37a5fc..a45630ea33d3b7b63e07379df40e2cb9e74d7fd3 100644
--- a/simulation/frc_gazebo_plugins/dc_motor/Makefile
+++ b/simulation/frc_gazebo_plugins/dc_motor/Makefile
@@ -3,6 +3,11 @@ lib.dir = $(prefix)/lib
 plugin.dir = $(lib.dir)/frcsim/plugins
 build.dir = build
 
+ext = .so
+ifeq ($(shell uname), Darwin)
+	ext = .dylib
+endif
+
 all:
 	mkdir -p $(build.dir)
 	cd ${build.dir} && cmake .. && make
@@ -12,4 +17,4 @@ clean:
 
 install: all
 	mkdir -p $(DESTDIR)$(plugin.dir)
-	install $(build.dir)/libgz_dc_motor.so $(DESTDIR)$(plugin.dir)
+	install $(build.dir)/libgz_dc_motor$(ext) $(DESTDIR)$(plugin.dir)
diff --git a/simulation/frc_gazebo_plugins/encoder/Makefile b/simulation/frc_gazebo_plugins/encoder/Makefile
index 8f483413f16e6800b09d43c4d5b6dd1607fbe76c..42f322fe56355678a5672294296e5c7448875f1c 100644
--- a/simulation/frc_gazebo_plugins/encoder/Makefile
+++ b/simulation/frc_gazebo_plugins/encoder/Makefile
@@ -3,6 +3,11 @@ lib.dir = $(prefix)/lib
 plugin.dir = $(lib.dir)/frcsim/plugins
 build.dir = build
 
+ext = .so
+ifeq ($(shell uname), Darwin)
+	ext = .dylib
+endif
+
 all:
 	mkdir -p $(build.dir)
 	cd ${build.dir} && cmake .. && make
@@ -12,4 +17,4 @@ clean:
 
 install: all
 	mkdir -p $(DESTDIR)$(plugin.dir)
-	install $(build.dir)/libgz_encoder.so $(DESTDIR)$(plugin.dir)
+	install $(build.dir)/libgz_encoder$(ext) $(DESTDIR)$(plugin.dir)
diff --git a/simulation/frc_gazebo_plugins/gyro/Makefile b/simulation/frc_gazebo_plugins/gyro/Makefile
index 09d1fd9fd012638ae26fc4b646d5e5a01631f23b..f70e5713be81fc256dc9cf0a9923073435d78213 100644
--- a/simulation/frc_gazebo_plugins/gyro/Makefile
+++ b/simulation/frc_gazebo_plugins/gyro/Makefile
@@ -3,6 +3,11 @@ lib.dir = $(prefix)/lib
 plugin.dir = $(lib.dir)/frcsim/plugins
 build.dir = build
 
+ext = .so
+ifeq ($(shell uname), Darwin)
+	ext = .dylib
+endif
+
 all:
 	mkdir -p $(build.dir)
 	cd ${build.dir} && cmake .. && make
@@ -12,4 +17,4 @@ clean:
 
 install: all
 	mkdir -p $(DESTDIR)$(plugin.dir)
-	install $(build.dir)/libgz_gyro.so $(DESTDIR)$(plugin.dir)
+	install $(build.dir)/libgz_gyro$(ext) $(DESTDIR)$(plugin.dir)
diff --git a/simulation/frc_gazebo_plugins/limit_switch/Makefile b/simulation/frc_gazebo_plugins/limit_switch/Makefile
index d97fb1bc9d77348e7da5b5b99bfd3987815582d4..8656c9913f70032368dc486b4a1859b743e43a9d 100644
--- a/simulation/frc_gazebo_plugins/limit_switch/Makefile
+++ b/simulation/frc_gazebo_plugins/limit_switch/Makefile
@@ -3,6 +3,11 @@ lib.dir = $(prefix)/lib
 plugin.dir = $(lib.dir)/frcsim/plugins
 build.dir = build
 
+ext = .so
+ifeq ($(shell uname), Darwin)
+	ext = .dylib
+endif
+
 all:
 	mkdir -p $(build.dir)
 	cd ${build.dir} && cmake .. && make
@@ -12,4 +17,4 @@ clean:
 
 install: all
 	mkdir -p $(DESTDIR)$(plugin.dir)
-	install $(build.dir)/libgz_limit_switch.so $(DESTDIR)$(plugin.dir)
+	install $(build.dir)/libgz_limit_switch$(ext) $(DESTDIR)$(plugin.dir)
diff --git a/simulation/frc_gazebo_plugins/msgs/Makefile b/simulation/frc_gazebo_plugins/msgs/Makefile
index 971a8ecba310eadbff60531cf5196736dd5f80c5..4ec4bd5e0c4006c8e578e98fdbe4ba35d1262ca4 100644
--- a/simulation/frc_gazebo_plugins/msgs/Makefile
+++ b/simulation/frc_gazebo_plugins/msgs/Makefile
@@ -3,6 +3,11 @@ lib.dir = $(prefix)/lib
 plugin.dir = $(lib.dir)/frcsim/plugins
 build.dir = build
 
+ext = .so
+ifeq ($(shell uname), Darwin)
+	ext = .dylib
+endif
+
 all:
 	mkdir -p $(build.dir)
 	cd ${build.dir} && cmake .. && make
@@ -12,4 +17,4 @@ clean:
 
 install: all
 	mkdir -p $(DESTDIR)$(plugin.dir)
-	install $(build.dir)/libgz_msgs.so $(DESTDIR)$(plugin.dir)
+	install $(build.dir)/libgz_msgs$(ext) $(DESTDIR)$(plugin.dir)
diff --git a/simulation/frc_gazebo_plugins/pneumatic_piston/Makefile b/simulation/frc_gazebo_plugins/pneumatic_piston/Makefile
index 3a78d0f69d9de93c47dc0d3d4216e6e594496931..f87ca630bef62b66f162b5192999f516b7c3251b 100644
--- a/simulation/frc_gazebo_plugins/pneumatic_piston/Makefile
+++ b/simulation/frc_gazebo_plugins/pneumatic_piston/Makefile
@@ -3,6 +3,11 @@ lib.dir = $(prefix)/lib
 plugin.dir = $(lib.dir)/frcsim/plugins
 build.dir = build
 
+ext = .so
+ifeq ($(shell uname), Darwin)
+	ext = .dylib
+endif
+
 all:
 	mkdir -p $(build.dir)
 	cd ${build.dir} && cmake .. && make
@@ -12,4 +17,4 @@ clean:
 
 install: all
 	mkdir -p $(DESTDIR)$(plugin.dir)
-	install $(build.dir)/libgz_pneumatic_piston.so $(DESTDIR)$(plugin.dir)
+	install $(build.dir)/libgz_pneumatic_piston$(ext) $(DESTDIR)$(plugin.dir)
diff --git a/simulation/frc_gazebo_plugins/potentiometer/Makefile b/simulation/frc_gazebo_plugins/potentiometer/Makefile
index 147add93148c0cf40b467c658155d8aac4f65b4a..54fb9ac7df6d3c87fcb004ef67352510c5663fd6 100644
--- a/simulation/frc_gazebo_plugins/potentiometer/Makefile
+++ b/simulation/frc_gazebo_plugins/potentiometer/Makefile
@@ -3,6 +3,11 @@ lib.dir = $(prefix)/lib
 plugin.dir = $(lib.dir)/frcsim/plugins
 build.dir = build
 
+ext = .so
+ifeq ($(shell uname), Darwin)
+	ext = .dylib
+endif
+
 all:
 	mkdir -p $(build.dir)
 	cd ${build.dir} && cmake .. && make
@@ -12,4 +17,4 @@ clean:
 
 install: all
 	mkdir -p $(DESTDIR)$(plugin.dir)
-	install $(build.dir)/libgz_potentiometer.so $(DESTDIR)$(plugin.dir)
+	install $(build.dir)/libgz_potentiometer$(ext) $(DESTDIR)$(plugin.dir)
diff --git a/simulation/frc_gazebo_plugins/rangefinder/Makefile b/simulation/frc_gazebo_plugins/rangefinder/Makefile
index f9a1fcc5083adac967f7080d78223e7375039654..21c3732b3e3d496acc7cb8eeb599425cb1416986 100644
--- a/simulation/frc_gazebo_plugins/rangefinder/Makefile
+++ b/simulation/frc_gazebo_plugins/rangefinder/Makefile
@@ -3,6 +3,11 @@ lib.dir = $(prefix)/lib
 plugin.dir = $(lib.dir)/frcsim/plugins
 build.dir = build
 
+ext = .so
+ifeq ($(shell uname), Darwin)
+	ext = .dylib
+endif
+
 all:
 	mkdir -p $(build.dir)
 	cd ${build.dir} && cmake .. && make
@@ -12,4 +17,4 @@ clean:
 
 install: all
 	mkdir -p $(DESTDIR)$(plugin.dir)
-	install $(build.dir)/libgz_rangefinder.so $(DESTDIR)$(plugin.dir)
+	install $(build.dir)/libgz_rangefinder$(ext) $(DESTDIR)$(plugin.dir)
