From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Alex Henning <elcron@gmail.com>
Date: Mon, 11 Aug 2014 11:20:07 -0400
Subject: [PATCH 0277/6262] Fixed bug with plugins not including all simulation
 dependencies.

Change-Id: I34c84c6cd4d918039726aa2efb81efbcf98dd593
---
 eclipse-plugins/edu.wpi.first.wpilib.plugins.java/pom.xml | 6 ++++++
 .../src/main/java/edu/wpi/first/wpilibj/RobotBase.java    | 8 ++++----
 2 files changed, 10 insertions(+), 4 deletions(-)

diff --git a/eclipse-plugins/edu.wpi.first.wpilib.plugins.java/pom.xml b/eclipse-plugins/edu.wpi.first.wpilib.plugins.java/pom.xml
index 8c88166557d2f0cda7a0cb24a8f0c4b2528f5523..9b3d4d79436d5497b583a79e2ae043561df4960f 100644
--- a/eclipse-plugins/edu.wpi.first.wpilib.plugins.java/pom.xml
+++ b/eclipse-plugins/edu.wpi.first.wpilib.plugins.java/pom.xml
@@ -132,6 +132,12 @@
                   <artifactId>JavaGazebo</artifactId>
                   <version>0.1.0-SNAPSHOT</version>
                 </artifactItem>
+                <artifactItem>
+				  <groupId>edu.wpi.first.wpilibj</groupId>
+				  <artifactId>wpilibJava</artifactId>
+				  <version>0.1.0-SNAPSHOT</version>
+				  <type>jar</type>
+                </artifactItem>
                 <artifactItem>
 				  <groupId>edu.wpi.first.wpilibj</groupId>
 				  <artifactId>wpilibJavaSim</artifactId>
diff --git a/wpilibj/wpilibJavaSim/src/main/java/edu/wpi/first/wpilibj/RobotBase.java b/wpilibj/wpilibJavaSim/src/main/java/edu/wpi/first/wpilibj/RobotBase.java
index 43738d0b171aa07b894ba3fb8136fc15e4a2ad3f..36918184f05163893974e204b9a4ceb842dd3d85 100644
--- a/wpilibj/wpilibJavaSim/src/main/java/edu/wpi/first/wpilibj/RobotBase.java
+++ b/wpilibj/wpilibJavaSim/src/main/java/edu/wpi/first/wpilibj/RobotBase.java
@@ -153,10 +153,6 @@ public abstract class RobotBase {
      */
     public static void main(String args[]) { // TODO: expose main to teams?
         boolean errorOnExit = false;
-        
-        // Set some implementations so that the static methods work properly
-        Timer.SetImplementation(new SimTimer());
-        RobotState.SetImplementation(DriverStation.getInstance());
 
         try {
             MainNode.openGazeboConnection();
@@ -166,6 +162,10 @@ public abstract class RobotBase {
             System.exit(1);
             return;
         }
+        
+        // Set some implementations so that the static methods work properly
+        Timer.SetImplementation(new SimTimer());
+        RobotState.SetImplementation(DriverStation.getInstance());
 
 		String robotName = "";
 		Enumeration<URL> resources = null;
